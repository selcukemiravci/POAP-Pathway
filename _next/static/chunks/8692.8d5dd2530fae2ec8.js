"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8692],{4646:function(e,t,n){n.d(t,{n:function(){return normalizeChainId}});function normalizeChainId(e){return"string"==typeof e?Number.parseInt(e,"0x"===e.trim().substring(0,2)?16:10):"bigint"==typeof e?Number(e):e}},38692:function(e,t,n){n.d(t,{PaperWalletConnector:function(){return PaperWalletConnector}});var s=n(16074),l=n(42009),h=n(67885),g=n(19485),p=n(79311),w=n(27021),f=n(4646);n(65007);var E=new WeakMap;let PaperWalletConnector=class PaperWalletConnector extends w.C{constructor(e){super(),(0,l._)(this,"id",p.w.paper),(0,l._)(this,"name","Paper Wallet"),(0,l._)(this,"ready",!0),(0,l._)(this,"user",null),(0,s._)(this,E,{writable:!0,value:void 0}),(0,l._)(this,"onAccountsChanged",async e=>{0===e.length?await this.onDisconnect():this.emit("change",{account:g.getAddress(e[0])})}),(0,l._)(this,"onChainChanged",e=>{let t=(0,f.n)(e),n=-1===this.options.chains.findIndex(e=>e.chainId===t);this.emit("change",{chain:{id:t,unsupported:n}})}),(0,l._)(this,"onDisconnect",async()=>{this.emit("disconnect")}),this.options=e}getPaperSDK(){return this.paper||(this.paper=new Promise(async(e,t)=>{let s=this.options.advancedOptions?.recoveryShareManagement;try{let{PaperEmbeddedWalletSdk:t}=await Promise.resolve().then(n.bind(n,67885)),l={AWS_MANAGED:h.pw.AWS_MANAGED,USER_MANAGED:h.pw.USER_MANAGED},g=s?l[s]:void 0;e(new t({advancedOptions:{recoveryShareManagement:g},clientId:this.options.clientId,chain:"Ethereum",styles:this.options.styles}))}catch(e){t(e)}})),this.paper}async connect(e){let t=await this.getPaperSDK();if(!t)throw Error("Paper SDK not initialized");let n=await t.getUser();switch(n.status){case h.J0.LOGGED_OUT:{let n;if(e?.googleLogin){let s=e.googleLogin;n=await t.auth.loginWithGoogle("object"==typeof s?s:void 0)}else n=e?.email&&e?.otp?await t.auth.verifyPaperEmailLoginOtp({email:e.email,otp:e.otp,recoveryCode:e.recoveryCode}):e?.email?await t.auth.loginWithPaperEmailOtp({email:e.email}):await t.auth.loginWithPaperModal();this.user=n.user;break}case h.J0.LOGGED_IN_WALLET_INITIALIZED:"object"==typeof e?.googleLogin&&e.googleLogin.closeOpenedWindow&&e.googleLogin.openedWindow&&e.googleLogin.closeOpenedWindow(e.googleLogin.openedWindow),this.user=n}if(!this.user)throw Error("Error connecting User");return e?.chainId&&this.switchChain(e.chainId),this.setupListeners(),this.getAddress()}async disconnect(){let e=await this.paper;await e?.auth.logout(),(0,s.a)(this,E,void 0),this.user=null}async getAddress(){let e=await this.getSigner();return e.getAddress()}async isConnected(){try{let e=await this.getAddress();return!!e}catch(e){return!1}}async getProvider(){let e=await this.getSigner();if(!e.provider)throw Error("Provider not found");return e.provider}async getSigner(){if((0,s.b)(this,E))return(0,s.b)(this,E);if(!this.user){let e=await this.getPaperSDK(),t=await e.getUser();t.status===h.J0.LOGGED_IN_WALLET_INITIALIZED&&(this.user=t)}let e=await this.user?.wallet.getEthersJsSigner({rpcEndpoint:this.options.chain.rpc[0]||""});if(!e)throw Error("Signer not found");return(0,s.a)(this,E,e),e}async isAuthorized(){return!1}async switchChain(e){let t=this.options.chains.find(t=>t.chainId===e);if(!t)throw Error("Chain not configured");await this.user?.wallet.setChain({chain:"Ethereum"}),(0,s.a)(this,E,await this.user?.wallet.getEthersJsSigner({rpcEndpoint:t.rpc[0]||""})),this.emit("change",{chain:{id:e,unsupported:!1}})}async setupListeners(){let e=await this.getProvider();e.on&&(e.on("accountsChanged",this.onAccountsChanged),e.on("chainChanged",this.onChainChanged),e.on("disconnect",this.onDisconnect))}updateChains(e){this.options.chains=e}async getEmail(){if(await this.getProvider(),!this.user)throw Error("No user found, Paper Wallet is not connected");return this.user.authDetails.email}}},67885:function(e,t,n){n.d(t,{PaperEmbeddedWalletSdk:function(){return K},pw:function(){return N},J0:function(){return b}});var s,l,h,g,p={Ethereum:"https://ethereum.rpc.thirdweb.com",Goerli:"https://goerli.rpc.thirdweb.com",Mumbai:"https://mumbai.rpc.thirdweb.com",Polygon:"https://polygon.rpc.thirdweb.com",Avalanche:"https://avalanche.rpc.thirdweb.com",Optimism:"https://optimism.rpc.thirdweb.com",OptimismGoerli:"https://optimism-goerli.rpc.thirdweb.com",BSC:"https://binance.rpc.thirdweb.com",BSCTestnet:"https://binance-testnet.rpc.thirdweb.com",ArbitrumOne:"https://arbitrum.rpc.thirdweb.com",ArbitrumGoerli:"https://arbitrum-goerli.rpc.thirdweb.com",Fantom:"https://fantom.rpc.thirdweb.com",FantomTestnet:"https://fantom-testnet.rpc.thirdweb.com",Sepolia:"https://sepolia.rpc.thirdweb.com",AvalancheFuji:"https://avalanche-fuji.rpc.thirdweb.com"},o=()=>"undefined"!=typeof window&&"true"===window.localStorage.getItem("IS_PAPER_DEV"),r=()=>"undefined"!=typeof window&&window.location.origin.includes("paper.xyz"),i=()=>{var e;return o()?null!=(e=window.localStorage.getItem("PAPER_DEV_URL"))?e:"http://localhost:3000":r()?window.location.origin:"https://withpaper.com"},w=n(27349),f=n(48088),E=n(6881),_=Object.defineProperty,A=Object.defineProperties,S=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,k=(e,t,n)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t)=>{for(var n in t||(t={}))D.call(t,n)&&k(e,n,t[n]);if(O)for(var n of O(t))C.call(t,n)&&k(e,n,t[n]);return e},y=(e,t)=>A(e,S(t)),dist_i=(e,t,n)=>new Promise((s,l)=>{var o=e=>{try{d(n.next(e))}catch(e){l(e)}},a=e=>{try{d(n.throw(e))}catch(e){l(e)}},d=e=>e.done?s(e.value):Promise.resolve(e.value).then(o,a);d((n=n.apply(e,t)).next())}),M="/sdk/2022-08-12/embedded-wallet",L=e=>`paperEwsWalletUserId-${e}`,I=e=>`walletToken-${e}`,W=(e,t)=>`a-${e}-${t}`,N=((s=N||{}).USER_MANAGED="USER_MANAGED",s.AWS_MANAGED="AWS_MANAGED",s),P=((l=P||{}).PAPER_EMAIL_OTP="PaperEmailOTP",l.GOOGLE="Google",l.TWITTER="Twitter",l.COGNITO="Cognito",l.AUTH0="Auth0",l.CUSTOM_JWT="CustomJWT",l),b=((h=b||{}).LOGGED_OUT="Logged Out",h.LOGGED_IN_WALLET_INITIALIZED="Logged In, Wallet Initialized",h),T=((g=T||{}).LOGGED_OUT="Logged Out",g.LOGGED_IN_WALLET_UNINITIALIZED="Logged In, Wallet Uninitialized",g.LOGGED_IN_NEW_DEVICE="Logged In, New Device",g.LOGGED_IN_WALLET_INITIALIZED="Logged In, Wallet Initialized",g),G=new Map,U=class{constructor({clientId:e}){this.isSupported="undefined"!=typeof window&&!!window.localStorage,this.clientId=e}getItem(e){return dist_i(this,null,function*(){var t;return this.isSupported?window.localStorage.getItem(e):null!=(t=G.get(e))?t:null})}setItem(e,t){return dist_i(this,null,function*(){if(this.isSupported)return window.localStorage.setItem(e,t);G.set(e,t)})}removeItem(e){return dist_i(this,null,function*(){let t=yield this.getItem(e);return!!this.isSupported&&!!t&&(window.localStorage.removeItem(e),!0)})}saveAuthCookie(e){return dist_i(this,null,function*(){yield this.setItem(I(this.clientId),e)})}getAuthCookie(){return dist_i(this,null,function*(){return this.getItem(I(this.clientId))})}removeAuthCookie(){return dist_i(this,null,function*(){return this.removeItem(I(this.clientId))})}saveDeviceShare(e,t){return dist_i(this,null,function*(){yield this.saveWalletUserId(t),yield this.setItem(W(this.clientId,t),e)})}getDeviceShare(){return dist_i(this,null,function*(){let e=yield this.getWalletUserId();return e?this.getItem(W(this.clientId,e)):null})}removeDeviceShare(){return dist_i(this,null,function*(){let e=yield this.getWalletUserId();return!!e&&this.removeItem(W(this.clientId,e))})}getWalletUserId(){return dist_i(this,null,function*(){return this.getItem(L(this.clientId))})}saveWalletUserId(e){return dist_i(this,null,function*(){yield this.setItem(L(this.clientId),e)})}removeWalletUserId(){return dist_i(this,null,function*(){return this.removeItem(L(this.clientId))})}};function v(e){return new Promise(t=>{setTimeout(t,1e3*e)})}var R={height:"100%",width:"100%",border:"none",backgroundColor:"transparent",colorScheme:"light",position:"fixed",top:"0px",right:"0px",zIndex:"2147483646",display:"none"},j=new Map,q=class{constructor({link:e,iframeId:t,container:n=document.body,iframeStyles:s,onIframeInitialize:l}){this.POLLING_INTERVAL_SECONDS=1.4,this.POST_LOAD_BUFFER_SECONDS=1;let h=document.getElementById(t),g=new URL(e),p="1.2.4";if(!p)throw Error("Missing SDK_VERSION env var");if(g.searchParams.set("sdkVersion",p),!h||h.src!=g.href){if(!h){h=document.createElement("iframe");let e=u(u({},R),s);Object.assign(h.style,e),h.setAttribute("id",t),h.setAttribute("fetchpriority","high"),n.appendChild(h)}h.src=g.href,h.setAttribute("data-version",p),h.onload=this.onIframeLoadHandler(h,this.POST_LOAD_BUFFER_SECONDS,l)}this.iframe=h}onIframeLoadedInitVariables(){return dist_i(this,null,function*(){return{}})}onIframeLoadHandler(e,t,n){return()=>dist_i(this,null,function*(){yield new Promise((s,l)=>dist_i(this,null,function*(){var h;let g=new MessageChannel;g.port1.onmessage=t=>{let{data:h}=t;return g.port1.close(),h.success?(j.set(e.src,!0),n&&n(),s(!0)):l(Error(h.error))},yield v(t),null==(h=null==e?void 0:e.contentWindow)||h.postMessage({eventType:"initIframe",data:yield this.onIframeLoadedInitVariables()},`${i()}${M}`,[g.port2])}))})}call(e){return dist_i(this,arguments,function*({procedureName:e,params:t,showIframe:n=!1,injectRecoveryCode:s={isInjectRecoveryCode:!1}}){for(;!j.get(this.iframe.src);)yield v(this.POLLING_INTERVAL_SECONDS);return n&&(this.iframe.style.display="block",yield v(.005)),new Promise((l,h)=>{var g;if(s.isInjectRecoveryCode){let c=e=>dist_i(this,null,function*(){var t,n;if(e.origin!==i()||"paper_getRecoveryCode"!==e.data.type||"string"!=typeof e.data.userWalletId)return;let l=yield null==(t=s.getRecoveryCode)?void 0:t.call(s,e.data.userWalletId);null==(n=this.iframe.contentWindow)||n.postMessage({type:"paper_getRecoveryCode_response",recoveryCode:l},i()),window.removeEventListener("message",c)});window.addEventListener("message",c)}let p=new MessageChannel;p.port1.onmessage=e=>dist_i(this,null,function*(){let{data:t}=e;p.port1.close(),n&&(yield v(.1),this.iframe.style.display="none"),t.success?l(t.data):h(Error(t.error))}),null==(g=this.iframe.contentWindow)||g.postMessage({eventType:e,data:t},`${i()}${M}`,[p.port2])})})}destroy(){j.delete(this.iframe.src)}},z=class extends q{constructor({clientId:e,customizationOptions:t}){super({iframeId:Q,link:function({clientId:e,path:t,queryParams:n}){var s;let l=new URL(t,i());if(n)for(let e of Object.keys(n))l.searchParams.set(e,(null==(s=n[e])?void 0:s.toString())||"");return l.searchParams.set("clientId",e),l}({clientId:e,path:M,queryParams:t}).href,container:document.body}),this.clientId=e}onIframeLoadedInitVariables(){return dist_i(this,null,function*(){let e=new U({clientId:this.clientId});return{authCookie:yield e.getAuthCookie(),deviceShareStored:yield e.getDeviceShare(),walletUserId:yield e.getWalletUserId(),clientId:this.clientId}})}},Q="paper-embedded-wallet-iframe",F=class{constructor({querier:e,preLogin:t,postLogin:n,clientId:s}){this.LoginQuerier=e,this.preLogin=t,this.postLogin=n,this.clientId=s}sendPaperEmailLoginOtp(e){return dist_i(this,arguments,function*({email:e,recoveryShareManagement:t}){yield this.preLogin();let{isNewUser:n,isNewDevice:s,recoveryShareManagement:l}=yield this.LoginQuerier.call({procedureName:"sendPaperEmailLoginOtp",params:{email:e,recoveryShareManagement:t}});return{isNewUser:n,isNewDevice:s,recoveryShareManagement:l}})}},x=class extends F{constructor(){super(...arguments),this.closeWindow=({isWindowOpenedByFn:e,win:t,closeOpenedWindow:n})=>{e?null==t||t.close():t&&n?n(t):t&&t.close()}}loginWithPaperModal(){return dist_i(this,null,function*(){yield this.preLogin();let e=yield this.LoginQuerier.call({procedureName:"loginWithPaperModal",params:{recoveryShareManagement:"AWS_MANAGED"},showIframe:!0,injectRecoveryCode:{isInjectRecoveryCode:!0}});return this.postLogin(e)})}getGoogleLoginUrl(){return dist_i(this,null,function*(){return yield this.LoginQuerier.call({procedureName:"getHeadlessGoogleLoginLink",params:void 0})})}loginWithGoogle(e){return dist_i(this,null,function*(){yield this.preLogin();let t=null==e?void 0:e.openedWindow,n=!1;if(t||(t=window.open("","Login","width=350, height=500"),n=!0),!t)throw Error("Something went wrong opening pop-up");yield this.preLogin();let{loginLink:s}=yield this.getGoogleLoginUrl();t.location.href=s;let l=yield new Promise((s,l)=>{let h=window.setInterval(()=>dist_i(this,null,function*(){t&&t.closed&&(clearInterval(h),window.removeEventListener("message",m),l(Error("User closed login window")))}),1e3),m=g=>dist_i(this,null,function*(){if(g.origin===i()){if("object"!=typeof g.data){l(Error("Invalid event data"));return}switch(g.data.eventType){case"userLoginSuccess":window.removeEventListener("message",m),clearInterval(h),this.closeWindow({isWindowOpenedByFn:n,win:t,closeOpenedWindow:null==e?void 0:e.closeOpenedWindow}),g.data.authResult&&s(g.data.authResult);break;case"userLoginFailed":window.removeEventListener("message",m),clearInterval(h),this.closeWindow({isWindowOpenedByFn:n,win:t,closeOpenedWindow:null==e?void 0:e.closeOpenedWindow}),l(Error(g.data.error));break;case"injectDeveloperClientId":null==t||t.postMessage({eventType:"injectDeveloperClientIdResult",developerClientId:this.clientId},i())}}});window.addEventListener("message",m)});return this.postLogin({storedToken:y(u({},l.storedToken),{shouldStoreCookieString:!0}),walletDetails:y(u({},l.walletDetails),{isIframeStorageEnabled:!1})})})}loginWithPaperEmailOtp(e){return dist_i(this,arguments,function*({email:e}){yield this.preLogin();let t=yield this.LoginQuerier.call({procedureName:"loginWithPaperModal",params:{email:e,recoveryShareManagement:"AWS_MANAGED"},showIframe:!0,injectRecoveryCode:{isInjectRecoveryCode:!0}});return this.postLogin(t)})}verifyPaperEmailLoginOtp(e){return dist_i(this,arguments,function*({email:e,otp:t}){let n=yield this.LoginQuerier.call({procedureName:"verifyPaperEmailLoginOtp",params:{email:e,otp:t,recoveryShareManagement:"AWS_MANAGED"},injectRecoveryCode:{isInjectRecoveryCode:!0}});return this.postLogin(n)})}},H=class extends F{loginWithPaperModal(e){return dist_i(this,null,function*(){yield this.preLogin();let t=yield this.LoginQuerier.call({procedureName:"loginWithPaperModal",params:void 0,showIframe:!0,injectRecoveryCode:{isInjectRecoveryCode:!0,getRecoveryCode:null==e?void 0:e.getRecoveryCode}});return this.postLogin(t)})}loginWithGoogle(e){return dist_i(this,null,function*(){throw Error("loginWithGoogle is not yet supported in the RecoveryShareManagement.USER_MANAGED flow. Please use RecoveryShareManagement.AWS_MANAGED instead.")})}loginWithPaperEmailOtp(e){return dist_i(this,arguments,function*({email:e,recoveryCode:t}){yield this.preLogin();let n=yield this.LoginQuerier.call({procedureName:"loginWithPaperModal",params:{email:e,recoveryCode:t},showIframe:!0,injectRecoveryCode:{isInjectRecoveryCode:!0}});return this.postLogin(n)})}verifyPaperEmailLoginOtp(e){return dist_i(this,arguments,function*({email:e,otp:t,recoveryCode:n}){let s=yield this.LoginQuerier.call({procedureName:"verifyPaperEmailLoginOtp",params:{email:e,otp:t,recoveryCode:n},injectRecoveryCode:{isInjectRecoveryCode:!0}});return this.postLogin(s)})}},J=class{constructor({clientId:e,advancedOptions:t,querier:n,onAuthSuccess:s}){var l;this.clientId=e,this.advancedOptions={recoveryShareManagement:null!=(l=null==t?void 0:t.recoveryShareManagement)?l:"AWS_MANAGED"},this.AuthQuerier=n,this.localStorage=new U({clientId:e}),this.onAuthSuccess=s,this.userManagedLogin=new H({postLogin:e=>dist_i(this,null,function*(){return this.postLogin(e)}),preLogin:()=>dist_i(this,null,function*(){yield this.preLogin()}),querier:n,clientId:e}),this.awsManagedLogin=new x({postLogin:e=>dist_i(this,null,function*(){return this.postLogin(e)}),preLogin:()=>dist_i(this,null,function*(){yield this.preLogin()}),querier:n,clientId:e})}preLogin(){return dist_i(this,null,function*(){yield this.logout()})}postLogin(e){return dist_i(this,arguments,function*({storedToken:e,walletDetails:t}){return e.shouldStoreCookieString&&(yield this.localStorage.saveAuthCookie(e.cookieString)),yield this.onAuthSuccess({storedToken:e,walletDetails:t})})}loginWithJwtAuth(e){return dist_i(this,arguments,function*({token:e,authProvider:t,recoveryCode:n}){yield this.preLogin();let s=yield this.AuthQuerier.call({procedureName:"loginWithJwtAuthCallback",params:{token:e,authProvider:t,recoveryCode:n}});return this.postLogin(s)})}loginWithPaperModal(e){return dist_i(this,null,function*(){return yield this.preLogin(),"AWS_MANAGED"===this.advancedOptions.recoveryShareManagement?this.awsManagedLogin.loginWithPaperModal():this.userManagedLogin.loginWithPaperModal(e)})}loginWithPaperEmailOtp(e){return dist_i(this,null,function*(){return"AWS_MANAGED"===this.advancedOptions.recoveryShareManagement?this.awsManagedLogin.loginWithPaperEmailOtp({email:e.email}):this.userManagedLogin.loginWithPaperEmailOtp(e)})}loginWithGoogle(e){return dist_i(this,null,function*(){return"AWS_MANAGED"===this.advancedOptions.recoveryShareManagement?this.awsManagedLogin.loginWithGoogle(e):this.userManagedLogin.loginWithGoogle()})}sendPaperEmailLoginOtp(e){return dist_i(this,arguments,function*({email:e}){return"AWS_MANAGED"===this.advancedOptions.recoveryShareManagement?this.awsManagedLogin.sendPaperEmailLoginOtp({email:e,recoveryShareManagement:"AWS_MANAGED"}):this.userManagedLogin.sendPaperEmailLoginOtp({email:e})})}verifyPaperEmailLoginOtp(e){return dist_i(this,null,function*(){return"AWS_MANAGED"===this.advancedOptions.recoveryShareManagement?this.awsManagedLogin.verifyPaperEmailLoginOtp(e):this.userManagedLogin.verifyPaperEmailLoginOtp(e)})}logout(){return dist_i(this,null,function*(){let{success:e}=yield this.AuthQuerier.call({procedureName:"logout",params:void 0}),t=yield this.localStorage.removeAuthCookie(),n=yield this.localStorage.removeWalletUserId();return{success:e||t||n}})}},V=class{constructor({chain:e,clientId:t,querier:n}){this.chain=e,this.clientId=t,this.gaslessTransactionQuerier=n}callContract(e){return dist_i(this,arguments,function*({contractAddress:e,methodArgs:t,methodInterface:n}){return yield this.gaslessTransactionQuerier.call({procedureName:"callContract",params:{chain:this.chain,contractAddress:e,method:{args:t,stub:n}}})})}},B=class extends f.Signer{constructor({provider:e,clientId:t,querier:n}){var s;super(),this.DEFAULT_ETHEREUM_CHAIN_ID=5,this.clientId=t,this.querier=n,this.endpoint=null==(s=e.connection)?void 0:s.url,(0,E.defineReadOnly)(this,"provider",e)}getAddress(){return dist_i(this,null,function*(){let{address:e}=yield this.querier.call({procedureName:"getAddress",params:void 0});return e})}signMessage(e){return dist_i(this,null,function*(){var t,n,s,l;let h=yield null==(t=this.provider)?void 0:t.getNetwork();h&&h._defaultProvider;let{signedMessage:g}=yield this.querier.call({procedureName:"signMessage",params:{message:e,chainId:null!=(l=null==(s=yield null==(n=this.provider)?void 0:n.getNetwork())?void 0:s.chainId)?l:this.DEFAULT_ETHEREUM_CHAIN_ID,rpcEndpoint:this.endpoint}});return g})}signTransaction(e){return dist_i(this,null,function*(){var t,n,s;let{signedTransaction:l}=yield this.querier.call({procedureName:"signTransaction",params:{transaction:e,chainId:null!=(s=null==(n=yield null==(t=this.provider)?void 0:t.getNetwork())?void 0:n.chainId)?s:this.DEFAULT_ETHEREUM_CHAIN_ID,rpcEndpoint:this.endpoint}});return l})}_signTypedData(e,t,n){return dist_i(this,null,function*(){var s,l,h;let{signedTypedData:g}=yield this.querier.call({procedureName:"signTypedDataV4",params:{domain:e,types:t,message:n,chainId:null!=(h=null==(l=yield null==(s=this.provider)?void 0:s.getNetwork())?void 0:l.chainId)?h:this.DEFAULT_ETHEREUM_CHAIN_ID,rpcEndpoint:this.endpoint}});return g})}connect(e){return new B({clientId:this.clientId,provider:e,querier:this.querier})}},$=class{constructor({clientId:e,chain:t,querier:n}){this.clientId=e,this.chain=t,this.walletManagerQuerier=n,this.gasless=new V({chain:t,clientId:e,querier:n}),this.localStorage=new U({clientId:e})}postWalletSetUp(e){return dist_i(this,arguments,function*({deviceShareStored:e,walletAddress:t,isIframeStorageEnabled:n,walletUserId:s}){return n||(yield this.localStorage.saveDeviceShare(e,s)),{walletAddress:t}})}getUserWalletStatus(){return dist_i(this,null,function*(){let e=yield this.walletManagerQuerier.call({procedureName:"getUserStatus",params:void 0});return"Logged In, Wallet Initialized"===e.status?{status:"Logged In, Wallet Initialized",user:y(u({},e.user),{wallet:this})}:e})}setChain(e){return dist_i(this,arguments,function*({chain:e}){this.chain=e,this.gasless=new V({chain:e,clientId:this.clientId,querier:this.walletManagerQuerier})})}getEthersJsSigner(e){return dist_i(this,null,function*(){var t;return new B({clientId:this.clientId,provider:(0,w.getDefaultProvider)(null!=(t=null==e?void 0:e.rpcEndpoint)?t:p[this.chain]),querier:this.walletManagerQuerier})})}},K=class{constructor({clientId:e,chain:t,styles:n,advancedOptions:s}){this.clientId=e,this.querier=new z({clientId:e,customizationOptions:n}),this.wallet=new $({clientId:e,chain:t,querier:this.querier}),this.auth=new J({clientId:e,advancedOptions:u({recoveryShareManagement:"USER_MANAGED"},null!=s?s:{}),querier:this.querier,onAuthSuccess:e=>dist_i(this,null,function*(){return yield this.wallet.postWalletSetUp(y(u({},e.walletDetails),{walletUserId:e.storedToken.authDetails.userWalletId})),yield this.querier.call({procedureName:"initIframe",params:{deviceShareStored:e.walletDetails.deviceShareStored,clientId:this.clientId,walletUserId:e.storedToken.authDetails.userWalletId,authCookie:e.storedToken.cookieString}}),{user:{status:"Logged In, Wallet Initialized",authDetails:e.storedToken.authDetails,wallet:this.wallet,walletAddress:e.walletDetails.walletAddress}}})})}getUser(){return dist_i(this,null,function*(){let e=yield this.wallet.getUserWalletStatus();switch(e.status){case"Logged In, New Device":case"Logged In, Wallet Uninitialized":return yield this.auth.logout(),this.getUser();case"Logged Out":return{status:"Logged Out"};case"Logged In, Wallet Initialized":return u({status:"Logged In, Wallet Initialized"},e.user)}})}}}}]);